<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOYVEEDO</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            /* Dark Mode (Default) */
            --primary-bg: #1a1a1a;
            --secondary-bg: #2a2a2a;
            --card-bg: #333333;
            --text-color: #f0f0f0;
            --header-text: #ffffff;
            --description-text: #d1d5db;
            --meta-text: #b0b0b0;
            --accent-color: #007bff;
            --border-color: #444;
            --hover-color: #4a4a4a;
            --input-bg: #2a2a2a;
            --input-text: #f0f0f0;
            --input-border: #444;
            --placeholder-text: #888;
        }

        body.light-mode {
            /* Light Mode Overrides */
            --primary-bg: #f4f5f7;
            --secondary-bg: #ffffff;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --header-text: #111827;
            --description-text: #4b5563;
            --meta-text: #6b7280;
            --border-color: #e5e7eb;
            --hover-color: #f9fafb;
            --input-bg: #ffffff;
            --input-text: #1f2937;
            --input-border: #d1d5db;
            --placeholder-text: #6b7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .ui.menu {
            background-color: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
            border-radius: 0;
            margin-bottom: 0;
            padding: 10px 20px;
        }

        .ui.menu .item {
            color: var(--text-color);
            font-weight: 500;
        }

        .ui.menu .item:hover {
            background-color: var(--hover-color);
            color: var(--text-color);
        }

        .ui.menu .item.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
            background: none;
        }

        .ui.menu .right.menu .item {
            padding-right: 0;
        }

        .ui.inverted.segment {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .ui.card, .ui.cards > .card {
            background-color: var(--card-bg);
            color: var(--text-color);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease-in-out;
            cursor: pointer;
        }

        .ui.card:hover, .ui.cards > .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }

        .ui.card > .image > img {
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            height: 180px; /* Fixed height for thumbnails */
            object-fit: cover;
        }

        .ui.card > .image {
            position: relative;
        }

        .video-lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .video-lock-overlay i {
            font-size: 3em;
            color: #fff;
        }

        .player-lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            z-index: 10;
        }

        .player-lock-overlay i {
            font-size: 4em;
            color: #fff;
            margin-bottom: 20px;
        }

        .player-lock-overlay p {
            color: #fff;
            font-size: 1.2em;
            text-align: center;
            margin: 0;
        }

        #video-player-section {
            position: relative;
        }

        .channel-filter {
            margin-bottom: 20px;
        }

        .channel-tabs {
            margin-bottom: 20px;
        }

        .featured-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff6b35;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            z-index: 5;
        }

        .ui.card > .content {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 15px;
        }

        .ui.card > .content > .header {
            color: var(--header-text);
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .ui.card > .content > .description {
            color: var(--description-text);
            font-size: 0.9em;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .ui.card > .content > .meta {
            color: var(--meta-text);
        }

        .ui.modal > .header {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
        }

        .ui.modal > .content {
            background-color: var(--primary-bg);
            color: var(--text-color);
        }

        .ui.modal > .actions {
            background-color: var(--secondary-bg);
            border-top: 1px solid var(--border-color);
        }

        .ui.form input[type="text"],
        .ui.form input[type="email"],
        .ui.form input[type="password"],
        .ui.form textarea {
            background-color: var(--input-bg) !important;
            color: var(--input-text) !important;
            border: 1px solid var(--input-border) !important;
            border-radius: 5px !important;
        }

        /* Semantic UI dropdown needs specific overrides for light mode */
        .ui.form input[type="text"]::placeholder,
        .ui.form input[type="email"]::placeholder,
        .ui.form input[type="password"]::placeholder,
        .ui.form textarea::placeholder {
            color: #888 !important;
        }

        .ui.form .field > label {
            color: var(--text-color) !important;
        }

        .ui.button {
            border-radius: 5px;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        }

        .ui.primary.button {
            background-color: var(--accent-color);
            color: white;
        }

        .ui.primary.button:hover {
            background-color: #0056b3;
            color: white;
        }

        .ui.negative.button {
            background-color: #dc3545;
            color: white;
        }

        .ui.negative.button:hover {
            background-color: #c82333;
            color: white;
        }

        .ui.table {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .ui.table thead th {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
        }

        .ui.table tbody tr {
            background-color: var(--card-bg);
        }

        .ui.table tbody tr:hover {
            background-color: var(--hover-color);
        }

        .ui.table td {
            color: var(--text-color);
            border-top: 1px solid var(--border-color);
        }

        #video-player-section iframe { /* Changed to iframe */
            width: 100%;
            max-height: 70vh;
            background-color: black;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .video-details h2 {
            color: var(--header-text);
            margin-top: 0;
            margin-bottom: 10px;
        }

        .video-details p {
            color: var(--description-text);
            line-height: 1.6;
        }

        .ui.segment {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .message-box {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background-color: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none; /* Hidden by default */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .message-box.error {
            background-color: #dc3545;
        }

        .message-box.show {
            display: block;
            opacity: 1;
        }

        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .loader-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .ui.active.loader {
            color: white;
        }

        /* --- Light Mode Overrides for Semantic UI Inverted Components --- */
        body.light-mode .ui.inverted.menu {
            background: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
        }
        body.light-mode .ui.inverted.menu .item {
            color: var(--text-color);
        }
        body.light-mode .ui.inverted.menu .item:hover {
            background: var(--hover-color);
        }
        body.light-mode .ui.inverted.menu .item.active {
            color: var(--accent-color);
            background: none;
        }
        body.light-mode .ui.inverted.segment {
            background: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        body.light-mode .ui.table.inverted {
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        body.light-mode .ui.table.inverted thead th {
            background: var(--secondary-bg);
            color: var(--text-color);
        }
        body.light-mode .ui.table.inverted td {
            color: var(--text-color);
            border-top: 1px solid var(--border-color);
        }
        body.light-mode .ui.basic.inverted.button {
            background-color: transparent !important;
            color: var(--text-color) !important;
            box-shadow: 0 0 0 1px var(--border-color) inset !important;
        }

        /* Responsive adjustments */
        @media only screen and (max-width: 767px) {
            .ui.menu .item {
                padding: 10px 15px;
            }
            .ui.container {
                margin-left: 10px !important;
                margin-right: 10px !important;
            }
            .ui.cards.three > .card {
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
            }
        }
    </style>
</head>
<body>

    <div id="message-box" class="message-box"></div>

    <div id="loader-overlay" class="loader-overlay">
        <div class="ui active inverted dimmer">
            <div class="ui large text loader">Loading...</div>
        </div>
    </div>

    <div class="ui modal" id="login-modal">
        <div class="header">Login</div>
        <div class="content">
            <form class="ui form" id="login-form">
                <div class="field">
                    <label>Email</label>
                    <input type="email" name="email" placeholder="Email" required>
                </div>
                <div class="field">
                    <label>Password</label>
                    <input type="password" name="password" placeholder="Password" required>
                </div>
                <button class="ui primary button" type="submit">Login</button>
            </form>
        </div>
    </div>

    <div class="ui modal" id="signup-modal">
        <div class="header">Sign Up</div>
        <div class="content">
            <form class="ui form" id="signup-form">
                <div class="field">
                    <label>Email</label>
                    <input type="email" name="email" placeholder="Email" required>
                </div>
                <div class="field">
                    <label>Password</label>
                    <input type="password" name="password" placeholder="Password" required>
                </div>
                <button class="ui primary button" type="submit">Sign Up</button>
            </form>
        </div>
    </div>

    <div class="ui modal" id="video-modal">
        <div class="header" id="video-modal-header">Add New Video</div>
        <div class="content">
            <form class="ui form" id="video-form">
                <input type="hidden" id="video-id-input">
                <div class="field">
                    <label>Title</label>
                    <input type="text" id="video-title" placeholder="Video Title" required>
                </div>
                <div class="field">
                    <label>Description</label>
                    <textarea id="video-description" placeholder="Video Description" rows="3"></textarea>
                </div>
                <div class="field">
                    <label>Thumbnail URL (Optional)</label>
                    <input type="text" id="video-thumbnail" placeholder="e.g., https://placehold.co/600x400">
                </div>
                <div class="field">
                    <label>Google Drive Embed Link</label>
                    <input type="url" id="video-url" placeholder="Paste Google Drive embed link here" required>
                    <p class="ui mini text" style="margin-top: 5px; color: #aaa;">
                        Ensure your Google Drive video is shared publicly ("Anyone with the link can view").
                        Get the embed link from Google Drive: Right-click video > Share > Get link > Change to "Anyone with the link" > Copy link.
                        Then go to File > Embed item > Copy the `src` URL from the iframe.
                    </p>
                </div>
                <div class="field">
                    <label>Channel/Show</label>
                    <div class="ui fluid search selection dropdown" id="video-channel-dropdown">
                        <input type="hidden" id="video-channel" name="channel" required>
                        <i class="dropdown icon"></i>
                        <div class="default text">Select or create a channel...</div>
                        <div class="menu">
                            <!-- Channel options will be populated by JS -->
                        </div>
                    </div>
                </div>
                <div class="field">
                    <div class="ui checkbox">
                        <input type="checkbox" id="video-featured">
                        <label>Featured Video (Show in featured section)</label>
                    </div>
                </div>
                <button class="ui primary button" type="submit" id="video-form-submit-btn">Add Video</button>
            </form>
        </div>
    </div>

    <div class="ui modal" id="user-role-modal">
        <div class="header">Change User Role</div>
        <div class="content">
            <form class="ui form" id="user-role-form">
                <input type="hidden" id="user-id-input">
                <div class="field">
                    <label>User Email</label>
                    <input type="text" id="user-email-display" readonly>
                </div>
                <div class="field">
                    <label>New Role</label>
                    <select id="user-new-role" class="ui dropdown">
                        <option value="user">User (No video access)</option>
                        <option value="viewer">Viewer (Can watch videos)</option>
                        <option value="admin">Admin (Full access)</option>
                    </select>
                </div>
                <button class="ui primary button" type="submit">Update Role</button>
            </form>
        </div>
    </div>

    <div class="ui inverted menu">
        <div class="ui container">
            <a class="item" id="home-link">
                <i class="play circle outline icon"></i>
                GOYVEEDO
            </a>
            <div class="right menu">
                <a class="item" id="theme-toggle-btn" title="Toggle Theme" style="cursor: pointer;">
                    <i class="large moon icon" id="theme-icon"></i>
                </a>
                 <a href="pricing.html" class="item" id="pricing" title="Pricing" style="cursor: pointer;">
                    Pricing
                </a>
                <div class="item" id="user-info-display" style="display: none;">
                    Welcome, <span id="current-user-email"></span> (<span id="current-user-role"></span>)
                </div>
                <a class="item" id="admin-link" style="display: none;">
                    <i class="cogs icon"></i> Admin
                </a>
                <a class="item" id="login-btn">
                    <i class="sign in alternate icon"></i> Login
                </a>
                <a class="item" id="signup-btn">
                    <i class="user plus icon"></i> Sign Up
                </a>
                <a class="item" id="logout-btn" style="display: none;">
                    <i class="sign out alternate icon"></i> Logout
                </a>
            </div>
        </div>
    </div>

    <div class="ui container" style="flex-grow: 1; padding: 20px 0;">

        <div id="home-section" class="ui segment" style="display: none;">
            <h2 class="ui header" style="color: var(--text-color);">Featured Videos</h2>
            <div class="ui three stackable cards" id="featured-video-grid">
                <!-- Featured videos will be populated here -->
            </div>
            <p id="no-featured-videos-message" style="text-align: center; color: #888; display: none;">No featured videos available yet.</p>
            
            <div class="ui divider"></div>
            
            <h2 class="ui header" style="color: var(--text-color);">Video Library</h2>
            <!-- Search Bar -->
            <div class="ui fluid icon input" style="margin-bottom: 20px;">
                <input type="text" id="video-search-input" placeholder="Search for videos...">
                <i class="search icon"></i>
            </div>

            <!-- Container for channel groups -->
            <div id="channel-video-container">
                <!-- JS will populate this with channel sections -->
            </div>
            <p id="no-videos-message" style="text-align: center; color: #888; display: none;">No videos available yet. Check back later!</p>
            <p id="no-search-results-message" style="text-align: center; color: #888; display: none;">No videos match your search.</p>
        </div>

        <div id="channel-view-section" class="ui segment" style="display: none;">
            <button class="ui basic inverted button" id="back-to-home-from-channel-btn" style="margin-bottom: 20px;">
                <i class="arrow left icon"></i> Back to All Channels
            </button>
            <h2 class="ui header" id="channel-view-title" style="color: var(--text-color);"></h2>
            <div class="ui three stackable cards" id="channel-view-grid">
                <!-- Videos for the selected channel will be populated here -->
            </div>
            <p id="no-channel-videos-message" style="text-align: center; color: #888; display: none;">There are no videos in this channel yet.</p>
        </div>

        <div id="video-player-section" class="ui segment" style="display: none;">
            <div id="player-lock-overlay" class="player-lock-overlay" style="display: none;">
                <i class="lock icon"></i>
                <p>You do not have permission to view this video.<br>Please log in or contact an administrator.</p>
            </div>
            <button class="ui basic inverted button" id="back-to-home-btn" style="margin-bottom: 20px;">
                <i class="arrow left icon"></i> Back to Home
            </button>
            <iframe id="video-iframe-player" width="100%" height="450" frameborder="0" allowfullscreen></iframe>
            <div class="video-details">
                <h2 id="player-video-title"></h2>
                <p id="player-video-description" style="color: var(--description-text);"></p>
                
            </div>
        </div>

        <div id="admin-section" class="ui segment" style="display: none;">
            <h2 class="ui header" style="color: var(--text-color);">Admin Dashboard</h2>
            <div class="ui top attached tabular menu">
                <a class="item active" data-tab="videos">Video Management</a>
                <a class="item" data-tab="users">User Management</a>
            </div>
            <div class="ui bottom attached tab segment active" data-tab="videos">
                <button class="ui primary button" id="add-video-btn" style="margin-bottom: 20px;">
                    <i class="plus icon"></i> Add New Video
                </button>
                <table class="ui celled table inverted">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Channel</th>
                            <th>Featured</th>
                            <th>Uploader</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="admin-video-list">
                        </tbody>
                </table>
                <p id="no-admin-videos-message" style="text-align: center; color: #888; display: none;">No videos to manage.</p>
            </div>
            <div class="ui bottom attached tab segment" data-tab="users">
                <table class="ui celled table inverted">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="admin-user-list">
                        </tbody>
                </table>
                <p id="no-admin-users-message" style="text-align: center; color: #888; display: none;">No users to manage.</p>
            </div>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>

    <script type="module" src="script.js"></script>
</body>
</html>
